<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kisan Connect</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #141414; 
            color: #f8eaea; 
            transition: background-color 0.3s ease; /* Smooth background transition */
        }

        header {
            background: rgba(46, 137, 130, 0.8);
            color: #e4dddd;
            text-align: center;
            padding: 70px 0;
            position: relative;
        }
        header img {
            position: absolute;
            left: 20px;
            top: 20px;
            width: 100px; 
            height: auto; 
        }
        .navbar {
            background-color: #0d091e;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Add shadow for depth */
        }

        .navbar .nav-link {
            color: white !important;
            font-weight: 500;
        }
        .register-login {
            background: #ff4757;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: background 0.3s;
        }
        .register-login:hover {
            background: #e84118;
        }
        .search-bar {
            width: 300px;
        }
        .carousel-item img {
            max-height: 450px;
            object-fit: cover;
        }
        .carousel-caption {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        .carousel-caption h1 {
            font-size: 3.5rem; 
            text-shadow: 2px 2px 4px rgb(195, 8, 8);
        }
        .btn-explore {
            background-color: #060a08;
            color: #cdddd9;
            padding: 15px 30px;
            border-radius: 5px;
            transition: background-color 0.2s, transform 0.2s; /* Add transform transition */
            margin-top: 15px;
            font-size: 1.2rem;
        }

        .btn-explore:hover {
            background-color: #38be14; /* Change color on hover */
            transform: scale(1.05); /* Slightly enlarge on hover */
        }

        .btn-explore:hover {
            background-color: #38be14;
        }
        .categories {
            padding: 60px 20px;
        }
        .category-box {
            background: linear-gradient(to right, #8e44ad, #3498db);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0px 6px 10px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            margin: 10px;
        }

        .category-box:hover {
            transform: scale(1.05); /* Slightly enlarge on hover */
            box-shadow: 0px 12px 20px rgba(0, 0, 0, 0.5); /* Enhance shadow on hover */
        }

        .category-box:hover {
            transform: scale(1.05);
            box-shadow: 0px 12px 20px rgba(0, 0, 0, 0.5);
        }
        .testimonials {
            padding: 40px 20px;
            background-color: #2c2c2c; 
            margin: 20px 0;
            text-align: center; 
        }
        .testimonial {
            font-size: 1.2rem; 
            margin: 20px 0; 
            color: #ffffff; 
            transition: transform 0.3s;
            padding: 20px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
        }
        .testimonial:hover {
            transform: scale(1.05);
        }
        footer {
            background: #11998e;
            color: white;
            padding: 10px 0;
            text-align: center; /* Center text in footer */
        }

        .icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        .section-title {
            font-size: 2.5rem;
            margin-bottom: 30px;
            font-weight: 600;
        }
        .contract-farming p {
            font-size: 1.2rem;
            line-height: 1.5;
            margin: 20px auto;
            max-width: 800px;
        }
        .category-box img {
            width: 100%;
            height: auto;
            border-radius: 10px;
        }
        .category-box h3 {
            margin-top: 15px;
            font-size: 1.5rem;
        }
        .testimonial p {
            font-style: italic;
        }
        .hero-section {
            position: relative;
            height: 60vh;
            overflow: hidden;
        }
        .hero-section img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
        }
        .hero-content {
            position: relative;
            z-index: 1;
            text-align: center;
            color: white;
        }
        #start-button {
            background-color: #ff4757;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: background-color 0.3s;
            position: fixed;
            bottom: 20px;
            right: 20px;
        }
        #start-button:hover {
            background-color: #e84118;
        }
    </style>
    <script src="config.js"></script>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg">
    <div class="container">
        <a class="navbar-brand text-white" href="index.html">
            <img src="logo.png.jpg" alt="Kisan Connect Logo" style="width: 35px; height: auto;">
            Kisan Connect
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
                <li class="nav-item"><a class="nav-link" href="contact.html">Contact Us</a></li>

            </ul>
            <div class="d-flex justify-content-center align-items-center mx-auto">
                <div class="input-group">
                    <input class="form-control search-bar" type="search" id="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success" type="button" id="search-button"><i class="fas fa-search"></i></button>
                </div>
            </div>
        </div>
        <a href="register.html" class="register-login">Register/Login</a>
    </div>
</nav>

<!-- Carousel Section -->
<div id="carouselExample" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="image1.jpg" class="d-block w-100" alt="Image 1">
            <div class="carousel-caption">
                <h1>Explore Our Crops</h1>
                <a href="#explore" class="btn btn-explore">Explore Now</a>
            </div>


        </div>
        <div class="carousel-item">
            <img src="image2.jpg" class="d-block w-100" alt="Image 2">
            <div class="carousel-caption">
                <h1>Top Quality Equipment</h1>
                <a href="#explore" class="btn btn-explore">Explore Now</a>
            </div>


        </div>
        <div class="carousel-item">
            <img src="image3.jpg" class="d-block w-100" alt="Image 3">
            <div class="carousel-caption">
                <h1>Fresh Produce Delivered</h1>
                <a href="#explore" class="btn btn-explore">Explore Now</a>
            </div>


        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>

<!-- Contract Farming Section -->
<section class="contract-farming" id="contract-farming">
    <div class="container text-center"><br>
        <h2 class="section-title">What is Contract Farming?</h2>
        <p>Contract farming is an agreement between farmers and buyers to produce specific crops at predetermined prices. This system ensures that farmers have a guaranteed market for their produce, while buyers can secure a consistent supply of quality products. It helps in reducing risks for both parties and promotes sustainable agricultural practices.</p>
    </div>
</section>

<!-- Categories Section -->
<section class="categories" id="explore">
    <div class="container">
        <h2 class="section-title">Explore Categories</h2>
        <div class="row">
            <div class="col-md-4">
                <div class="category-box" onclick="redirectTo('crops.html')">
                    <i class="fas fa-seedling icon"></i>
                    <h3>Crops</h3>
                    <p>Discover a variety of crops available for contract farming.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="category-box" onclick="redirectTo('equipment.html')">
                    <i class="fas fa-tractor icon"></i>
                    <h3>Equipment</h3>
                    <p>Find the best agricultural tools and equipment.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="category-box" onclick="redirectTo('produce.html')">
                    <i class="fas fa-apple-alt icon"></i>
                    <h3>Fresh Produce</h3>
                    <p>Order fresh fruits and vegetables directly from farmers.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials Section -->
<section class="testimonials" id="testimonials">
    <div class="container">
        <h2 class="section-title">What Our Users Say</h2>
        <div class="row">
            <div class="col-md-4">
                <div class="testimonial">
                    <p>"Kisan Connect has revolutionized my farming experience!"</p>
                    <footer class="footer">Ramanaiah, Farmer</footer>
                </div>
            </div>
            <div class="col-md-4">
                <div class="testimonial">
                    <p>"I can easily order fresh produce online. Highly recommend!"</p>
                    <footer class="footer">Sanjay, Customer</footer>
                </div>
            </div>
            <div class="col-md-4">
                <div class="testimonial">
                    <p>"The support from Kisan Connect is exceptional!"</p>
                    <footer class="footer">Suresh Patel, Farmer</footer>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer>
    <div class="container text-center">
        <p>&copy; 2025 Kisan Connect. All rights reserved.</p>
        <p>Customer Support: 9999999999 | Email: customercare@kisanconnect.in</p>
        <div>
            <a href="#" class="icon"><i class="fab fa-facebook"></i></a>
            <a href="#" class="icon"><i class="fab fa-twitter"></i></a>
            <a href="#" class="icon"><i class="fab fa-instagram"></i></a>
        </div>
    </div>
</footer>

<!-- Voice Navigation Button -->
<button id="start-button" class="btn btn-primary">
    <i class="fas fa-microphone"></i>
</button>

<!-- Scripts -->
<script>
    function redirectTo(page) {
        window.location.href = page;
    }

    // Search functionality
    document.getElementById('search-button').addEventListener('click', function() {
        const query = document.getElementById('search').value.toLowerCase();
        if (query) {
            // Redirect to a search results page or filter categories
            console.log('Searching for:', query);
            alert('Searching for: ' + query); // Placeholder for search action
        }
    });

    // Voice recognition setup
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const recognition = new SpeechRecognition();
    
    recognition.continuous = false; // Change to false to prevent overlapping
    recognition.interimResults = false;
    recognition.lang = 'en-US';
    let isListening = false;

    function toggleSpeechRecognition() {
        if (!isListening) {
            startRecognition();
        } else {
            stopRecognition();
        }
    }

    function startRecognition() {
        try {
            window.speechSynthesis.cancel(); // Cancel any ongoing speech
            recognition.abort(); // Stop any existing recognition
            recognition.start();
            document.getElementById('start-button').innerHTML = '<i class="fas fa-stop" style="color: #ff0000;"></i>';
            isListening = true;
            speak("Hi Aakash! I'm listening.");
        } catch (error) {
            console.error('Recognition error:', error);
            resetRecognition();
        }
    }

    function stopRecognition() {
        window.speechSynthesis.cancel(); // Cancel any ongoing speech
        recognition.abort(); // Use abort instead of stop
        resetRecognition();
        speak("Voice assistant stopped. Tap the button to start again.");
    }

    function resetRecognition() {
        document.getElementById('start-button').innerHTML = '<i class="fas fa-microphone"></i>';
        isListening = false;
    }

    // Initialize voice button with proper event handler
    document.addEventListener('DOMContentLoaded', function() {
        const startButton = document.getElementById('start-button');
        startButton.disabled = false;
        startButton.style.opacity = '1';
        startButton.style.cursor = 'pointer';
        
        // Remove any existing listeners and add new one
        startButton.replaceWith(startButton.cloneNode(true));
        document.getElementById('start-button').addEventListener('click', function(e) {
            e.preventDefault();
            toggleSpeechRecognition();
        });
    });

    recognition.onstart = () => {
        console.log('Voice recognition active');
        isListening = true;
    };

    recognition.onend = () => {
        console.log('Voice recognition ended');
        if (isListening) {
            try {
                setTimeout(() => {
                    recognition.start();
                }, 100);
            } catch (error) {
                console.error('Failed to restart recognition:', error);
                resetRecognition();
            }
        } else {
            resetRecognition();
        }
    };

    recognition.onresult = function(event) {
        const transcript = event.results[0][0].transcript.toLowerCase();
        console.log('Heard:', transcript);
        
        // Navigation commands
        if (transcript.includes('go to') || transcript.includes('open')) {
            if (transcript.includes('about')) {
                window.location.href = 'about.html';
            } else if (transcript.includes('register')) {
                window.location.href = 'register.html';
            } else if (transcript.includes('equipment')) {
                window.location.href = 'equipment-rentals.html';
            } else if (transcript.includes('market')) {
                window.location.href = 'market-trends.html';
            } else if (transcript.includes('home')) {
                window.location.href = 'index.html';
            }
        }
        // Information commands
        else if (transcript.includes('weather')) {
            getWeatherUpdate();
        } else if (transcript.includes('price') || transcript.includes('rate')) {
            getCropPrices();
        } else if (transcript.includes('news')) {
            getLatestNews();
        } else if (transcript.includes('help') || transcript.includes('commands')) {
            listAvailableCommands();
        } else {
            handleAIConversation(transcript);
        }
    };

    // Simplified speech queue
    let isSpeaking = false;
    const speechQueue = [];

    function speak(text) {
        if (!text) return;
        
        speechQueue.push(text);
        if (!isSpeaking) {
            processSpeechQueue();
        }
    }

    function processSpeechQueue() {
        if (speechQueue.length === 0) {
            isSpeaking = false;
            return;
        }

        isSpeaking = true;
        const text = speechQueue.shift();
        const speech = new SpeechSynthesisUtterance(text);
        
        speech.onend = () => {
            setTimeout(() => {
                isSpeaking = false;
                processSpeechQueue();
            }, 250);
        };

        window.speechSynthesis.speak(speech);
    }

    function handleAIConversation(command) {
        // Quick redirections for specific keywords
        const redirects = {
            'market trends': 'market-trends.html',
            'market update': 'market-trends.html',
            'weather': 'weather-updates.html',
            'weather update': 'weather-updates.html',
            'equipment': 'equipment-rentals.html',
            'equipment rental': 'equipment-rentals.html',
            'crops': 'organic-fruits.html',
            'crop prices': 'market-trends.html',
            'news': 'market-trends.html',
            'latest news': 'market-trends.html'
        };

        // Check for redirects first
        for (let key in redirects) {
            if (command.includes(key)) {
                speak(`Taking you to ${key} page, Aakash`);
                window.location.href = redirects[key];
                return;
            }
        }

        // Regular conversation responses
        const responses = {
            'hi': 'Hello Aakash! How can I assist you today?',
            'hello': 'Hi Aakash! How may I help you?',
            'how are you': 'I am doing well, thank you for asking Aakash!',
            'what can you do': listAvailableCommands,
            'help': listAvailableCommands,
            'commands': listAvailableCommands,
            'list commands': listAvailableCommands,
            'goodbye': 'Goodbye Aakash! Have a great day!',
            'thank you': 'You are welcome Aakash!'
        };
        
        for (let key in responses) {
            if (command.includes(key)) {
                if (typeof responses[key] === 'function') {
                    responses[key]();
                } else {
                    speak(responses[key]);
                }
                return;
            }
        }
        
        // If command not recognized
        speak("I'm not sure about that Aakash. Try these commands:");
        listQuickCommands();
    }

    function listQuickCommands() {
        speak(`
            Quick command guide for you Aakash:
            Say "market trends" for market prices,
            "weather update" for weather info,
            "equipment rental" for tools,
            "latest news" for updates,
            or "help" for full command list
        `);
    }

    function listAvailableCommands() {
        const commandGroups = {
            "Navigation Commands": [
                "Go to or open: about, register, equipment, market, home",
                "Market trends or market update - For market information",
                "Weather or weather update - For weather forecast",
                "Equipment or equipment rental - For farming tools",
                "Crops - For crop information",
                "Crop prices - For current rates",
                "News or latest news - For agricultural updates"
            ],
            "General Commands": [
                "Hi or Hello - To start conversation",
                "How are you - For casual chat",
                "What can you do - To learn my capabilities",
                "Help or Commands - To see this list",
                "Thank you - To end conversation",
                "Goodbye - To stop the assistant"
            ]
        };

        speak("Here are all available commands, Aakash:");
        
        Object.entries(commandGroups).forEach(([group, commands], groupIndex) => {
            setTimeout(() => {
                speak(group + ":");
                commands.forEach((command, cmdIndex) => {
                    setTimeout(() => speak(command), cmdIndex * 1000);
                });
            }, groupIndex * 7000);
        });
    }

    // Optimize speech synthesis for quicker response
    function speak(text) {
        if (!text) return;
        
        const speech = new SpeechSynthesisUtterance(text);
        speech.rate = 1.2; // Slightly faster speech
        speech.pitch = 1.0;
        window.speechSynthesis.cancel(); // Cancel any ongoing speech
        window.speechSynthesis.speak(speech);
    }

    // Weather updates using local data
    async function getWeatherUpdate() {
        try {
            speak(`Current temperature in Guntur is 36 degrees Celsius and the weather is Sunny`);
        } catch (error) {
            speak('Sorry, I could not fetch the weather information at this moment.');
        }
    }

    // News updates using local data
    async function getLatestNews() {
        try {
            speak('Here are the latest agricultural headlines:');
            const randomNews = config.AGRICULTURE_NEWS[Math.floor(Math.random() * config.AGRICULTURE_NEWS.length)];
            speak(randomNews);
        } catch (error) {
            speak('Sorry, I could not fetch the latest news at this moment.');
        }
    }

    // Crop prices using local data
    async function getCropPrices() {
        try {
            speak('Here are the current market prices:');
            const prices = config.CROP_PRICES;
            const randomCrop = Object.keys(prices)[Math.floor(Math.random() * Object.keys(prices).length)];
            speak(`${randomCrop} is selling at ${prices[randomCrop]}`);
        } catch (error) {
            speak('Sorry, I could not fetch the current market prices at this moment.');
        }
    }

    // News updates using local data
    async function getLatestNews() {
        try {
            speak('Here are the latest agricultural headlines:');
            const randomNews = config.AGRICULTURE_NEWS[Math.floor(Math.random() * config.AGRICULTURE_NEWS.length)];
            speak(randomNews);
        } catch (error) {
            speak('Sorry, I could not fetch the latest news at this moment.');
        }
    }

    // Crop prices using local data
    async function getCropPrices() {
        try {
            speak('Here are the current market prices:');
            const prices = config.CROP_PRICES;
            const randomCrop = Object.keys(prices)[Math.floor(Math.random() * Object.keys(prices).length)];
            speak(`${randomCrop} is selling at ${prices[randomCrop]}`);
        } catch (error) {
            speak('Sorry, I could not fetch the current market prices at this moment.');
        }
    }

    // Start voice recognition on button click
    startButton.addEventListener('click', () => {
        if (recognition) {
            recognition.start();
        }
    });

    recognition.onend = function() {
        startButton.innerHTML = '<i class="fas fa-microphone"></i>'; // Reset button icon
    };
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>